<div class="toolbar-content" cdkDropList cdkDropListOrientation="mixed" (cdkDropListDropped)="drop($event)">
   <div class="app-title">Links 3</div>

   <ng-container *ngIf="loginService.isAuthenticated">
      <button *ngIf="!pagesService.pages || pagesService.pages.length === 0" mat-button [routerLink]="'/add-page'">
         Add page
      </button>

      @for (page of pagesService.pages; track page) {
      <a mat-button
         [class]="isRouteName('/page') && pagesService.activePage?.pagePath === page.pagePath ? 'active-link' : ''"
         [routerLink]="['/page/'+page.pagePath]" [cdkContextMenuTriggerFor]="context_menu"
         (cdkContextMenuOpened)="onContextMenuOpened(page)" cdkDrag>{{page.caption || page.pagePath }}</a>
      }

   </ng-container>


   <span class="spacer"></span>

   <button mat-icon-button [matMenuTriggerFor]="menu">
      <mat-icon>menu</mat-icon>
   </button>
   <mat-menu #menu>
      <ng-container *ngIf="loginService.isAuthenticated">
         <a *ngIf="!isRouteName('/page')" mat-menu-item [routerLink]="'/page'">Pages</a>
         <a *ngIf="!isRouteName('/user-profile')" mat-menu-item [routerLink]="'/user-profile'">User Profile</a>
         <a *ngIf="!isRouteName('/contact-us')" mat-menu-item [routerLink]="'/contact-us'">Contact Us</a>
      </ng-container>
      <a *ngIf="!isRouteName('/help')" mat-menu-item [routerLink]="'/help'">Help</a>
      <a *ngIf="!isRouteName('/about')" mat-menu-item [routerLink]="'/about'">About</a>
      <ng-container *ngIf="loginService.isAuthenticated">
         <button mat-menu-item (click)="logOut()">Log out</button>
      </ng-container>
      <ng-container *ngIf="!loginService.isAuthenticated">
         <a *ngIf="!isRouteName('/register')" mat-menu-item [routerLink]="'/register'">Register</a>
         <a *ngIf="!isRouteName('/login')" mat-menu-item [routerLink]="'/login'">Login</a>
      </ng-container>
   </mat-menu>

   <ng-template #context_menu>
      <app-context-menu [title]="'Page'" [addPath]="'/add-page'" [updatePath]="'/update-page/'+this.popupPage?.pagePath"
         [delete]="deletePopupPage.bind(this)" [disabled]="!this.popupPage">
      </app-context-menu>
   </ng-template>

</div>


<router-outlet />